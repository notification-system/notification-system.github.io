<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.55.6" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x196.png" sizes="96x196">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png"sizes="192x192">

<title>Configuration | Nosy Docs</title><meta property="og:title" content="Configuration" />
<meta property="og:description" content="Step One We start configuring nosy-admin. Configuration is pretty straightforward, if you recall Architecture page Nosy admin is protected by Keycloak and using PostgreSQL database for persisting data. Besides that we use Kafka Topics to communicate between components. So all configurations are related to those features will be configured via environment variables.
Nosy Admin Configuration NOSY_FROM_ADDRESS=xxx@xxx.com DATASOURCE_URL=jdbc:postgresql://xxxxx:5432/nosydb DATASOURCE_USERNAME=xxxxx DATASOURCE_PASSWORD=xxxxx KAFKA_BROKER_URL=xxxxxx:xxxxx  Let&rsquo;s investigate each of these fields in detail" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://notification-system.github.io/docs/configuration/" />


<meta itemprop="name" content="Configuration">
<meta itemprop="description" content="Step One We start configuring nosy-admin. Configuration is pretty straightforward, if you recall Architecture page Nosy admin is protected by Keycloak and using PostgreSQL database for persisting data. Besides that we use Kafka Topics to communicate between components. So all configurations are related to those features will be configured via environment variables.
Nosy Admin Configuration NOSY_FROM_ADDRESS=xxx@xxx.com DATASOURCE_URL=jdbc:postgresql://xxxxx:5432/nosydb DATASOURCE_USERNAME=xxxxx DATASOURCE_PASSWORD=xxxxx KAFKA_BROKER_URL=xxxxxx:xxxxx  Let&rsquo;s investigate each of these fields in detail">



<meta itemprop="wordCount" content="953">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configuration"/>
<meta name="twitter:description" content="Step One We start configuring nosy-admin. Configuration is pretty straightforward, if you recall Architecture page Nosy admin is protected by Keycloak and using PostgreSQL database for persisting data. Besides that we use Kafka Topics to communicate between components. So all configurations are related to those features will be configured via environment variables.
Nosy Admin Configuration NOSY_FROM_ADDRESS=xxx@xxx.com DATASOURCE_URL=jdbc:postgresql://xxxxx:5432/nosydb DATASOURCE_USERNAME=xxxxx DATASOURCE_PASSWORD=xxxxx KAFKA_BROKER_URL=xxxxxx:xxxxx  Let&rsquo;s investigate each of these fields in detail"/>





<link rel="preload" href="/scss/main.min.f809dd81c31369e745fc9960408ecf7e6c5ed33854d3a4201a6c039d56a4d89c.css" as="style">
<link href="/scss/main.min.f809dd81c31369e745fc9960408ecf7e6c5ed33854d3a4201a6c039d56a4d89c.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


    <title>Configuration | Nosy Docs</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
	<a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Nosy Docs</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog/"><span>News</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/community/"><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/about/"><span>About</span></a>
			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"></div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-instructions" href="/docs/instructions/">Instructions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docs-configuration" href="/docs/configuration/">Configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-architecture" href="/docs/architecture/">Architecture</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-usage" href="/docs/usage/">Usage</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/releases/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Release Notes</a>
  </li>
  <ul>
    <li class="collapse " id="docs-releases">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-releases-release-1-0-0" href="/docs/releases/release-1.0.0/">Release 1.0.0</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/interface/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Interface</a>
  </li>
  <ul>
    <li class="collapse " id="docs-interface">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            



<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">



<a href="https://github.com/notification-system/nosy-admin/edit/master/content/docs%5cconfiguration%5cindex.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/notification-system/nosy-admin/issues/new?title=Configuration" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#step-one"><strong>Step One</strong></a>
<ul>
<li><a href="#nosy-admin-configuration"><strong>Nosy Admin Configuration</strong></a></li>
</ul></li>
<li><a href="#step-two"><strong>Step Two</strong></a>
<ul>
<li><a href="#keycloak-configuration-for-nosy-admin"><strong>Keycloak configuration for nosy-admin</strong></a></li>
</ul></li>
<li><a href="#step-three"><strong>Step Three</strong></a>
<ul>
<li><a href="#postgres-and-kafka-configurations-for-nosy"><strong>Postgres and Kafka configurations for NoSy</strong></a></li>
</ul></li>
<li><a href="#step-four"><strong>Step Four</strong></a>
<ul>
<li><a href="#nosy-email-configuration"><strong>NoSy Email Configuration</strong></a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="http://notification-system.github.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="http://notification-system.github.io/docs/configuration/">Configuration</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Configuration</h1>
	
	

<h3 id="step-one"><strong>Step One</strong></h3>

<p>We start configuring nosy-admin. Configuration is pretty straightforward, if you recall Architecture page Nosy admin is protected by Keycloak and using PostgreSQL database for persisting data. Besides that we use Kafka Topics to communicate between components. So all configurations are related to those features will be configured via environment variables.</p>

<h4 id="nosy-admin-configuration"><strong>Nosy Admin Configuration</strong></h4>

<pre><code>NOSY_FROM_ADDRESS=xxx@xxx.com
DATASOURCE_URL=jdbc:postgresql://xxxxx:5432/nosydb
DATASOURCE_USERNAME=xxxxx
DATASOURCE_PASSWORD=xxxxx
KAFKA_BROKER_URL=xxxxxx:xxxxx
</code></pre>

<p>Let&rsquo;s investigate each of these fields in detail</p>

<p><code>NOSY_FROM_ADDRESS=xxx@xxx.com</code></p>

<p>Above mentioned environment variable specifies what will be the default mail sender address. Keep in mind that in Nosy you can also configure default mail server address which can be linked to a private mail server. In addition you can use two more options: Gmail and Yandex. If you prefer to send emails from your private email address then this field should be initialized to your email server address. For example: test@example.com</p>

<p><code>DATASOURCE_URL=jdbc:postgresql://xxxxx:5432/nosydb</code></p>

<p>Above mentioned field specifies the address, port and database of postgress server. For example: jdbc:postgresql://127.0.0.1:5432/nosydb</p>

<p><code>KAFKA_BROKER_URL=xxxxxx:xxxxx</code></p>

<p>Above mentioned field specifies the address and port of Kafka broker for streaming. For example: example.com:9092</p>

<pre><code>DATASOURCE_USERNAME=xxxxx
DATASOURCE_PASSWORD=xxxxx
</code></pre>

<p>Above mentioned environment variables specify the username, password for postgres database. For example: username: nosy, password: nosy</p>

<pre><code>KEYCLOAK_ADMIN_USER=xxxxxx
KEYCLOAK_ADMIN_PASSWORD=xxxxx
KEYCLOAK_CLIENT=xxxxx
KEYCLOAK_AUTH_URL=xxxxxxx
KEYCLOAK_REALM=xxxxxxxx
KEYCLOAK_CLIENT_SECRET=xxx-xxx-xxx-xxxxx-xxx
KEYCLOAK_AUTH_URL=http://xxxxxx/xxxx
</code></pre>

<p>All environment variables mentioned above are related to Keycloak. We will cover configurations of Keycloak in the next section but let&rsquo;s first discuss what each field means in terms of configurations in nosy-admin. The first two fields are the admin user and password for specific client. For example: nosy-client-admin, password: xxxxxx. keycloak.resource is client name of nosy(e.g. nosy-client). keycloak.auth-server-url is the url to keycloak auth(e.g. <a href="https://example.com:8080/auth">https://example.com:8080/auth</a>). keycloak.realm is the realm for nosy(e.g nosy-realm) nosy.client.clientSecret is the secret for keycloak.resource(xxxx-xxxxx-xxxx-xxxx). We will talk about it later in keycloak section.</p>

<h3 id="step-two"><strong>Step Two</strong></h3>

<h4 id="keycloak-configuration-for-nosy-admin"><strong>Keycloak configuration for nosy-admin</strong></h4>

<p>This section will talk about keycloak configurations we need to do in order to make nosy-admin work. Keycloak is open source readhat IAM. You can refer to documentation of Keycloak by going to the following link: Keycloak Docs For api specs please refer to: Keycloak API Spec</p>

<p>Keycloak is open solution tool which plays role of security in nosy system. For more information you can refer to docs, here we will cover configuration for nosy. First of all, we have to create realm which will be used as a security for NoSy. Please bear in mind, this configurations will directly affect configurations of nosy-admin which we did above. To create realm go to Keycloak admin page and on the left corner press add realm. let&rsquo;s call our realm nosy-realm.</p>

<p><img src="/images/realm.png" alt="Realm" title="Realm" /></p>

<p>After creation of realm you can see on the top left corner which realm you are currently in. Pick nosy-realm and let&rsquo;s move to client creation for this realm. Click clients on the left side and press create on the right side of form. Here you should define Client id which can be nosy-client.</p>

<p><img src="/images/client.png" alt="Client" title="Client" /></p>

<p>You can leave name, description and login theme empty. You have to change the following fields: Enabled: On Client protocol: openid-connect Access Type: confidential Standard Flow Enabled: On Direct Access Grant Enabled: On Others can be off, because of confidential client please add valid redirect url which is basically your nosy-gui host(For localhost it will be <a href="http://localhost:4200">http://localhost:4200</a>)</p>

<p><img src="/images/client1.png" alt="Client1" title="Client1" /></p>

<p>After the creation of client we should create the client role. Press Roles under the nosy-client(Not Roles on the left side of the page, but inside the client there is a tab called roles). Click add role button and name it(For example nosy-role)</p>

<p><img src="/images/role.png" alt="Role" title="Role" /></p>

<p>Now go to users on the left side and then on the right side of the form click on Add User. Name our user, for example, admin-user and press save button. This will create an admin user for us. Then go to the credentials tab and set the password.</p>

<p><img src="/images/user.png" alt="User" title="User" /></p>

<p>Then go inside the user we have just created and click role mappings tab. Click on Client roles and add everything under that to this user.</p>

<p><img src="/images/role-mappings.png" alt="Role Mappings" title="Role Mappings" /></p>

<p>Keycloak Configurations is done. Now, according to our configurations for keycloak, let&rsquo;s set all variables.</p>

<pre><code>KEYCLOAK_ADMIN_USER=xxxxxx
KEYCLOAK_ADMIN_PASSWORD=xxxxx
KEYCLOAK_CLIENT=xxxxx
KEYCLOAK_AUTH_URL=xxxxxxx
KEYCLOAK_REALM=xxxxxxxx
KEYCLOAK_CLIENT_SECRET=xxx-xxx-xxx-xxxxx-xxx
KEYCLOAK_AUTH_URL=http://xxxxxx/xxxx
</code></pre>

<h3 id="step-three"><strong>Step Three</strong></h3>

<h4 id="postgres-and-kafka-configurations-for-nosy"><strong>Postgres and Kafka configurations for NoSy</strong></h4>

<p>We will set up plain postgres and kafka if you have some authentication in kafka please add necessary fields in application properties. For kafka please download kafka version and zookeeper and install them. You can follow instructions here: kafka After installation, please verify that kafka is exposing port if you are running remotely. If you are running locally then you can just add kafka host and port to application properties. Otherwise add ip address and port of kafka:</p>

<p><code>KAFKA_BROKER_URL=host:port</code></p>

<p>The same steps follow for Postgres. Please download postgres and create a user which can be used in our application and then create db named: nosydb(you can create any other database, but make sure you specify in application.properties) You can follow instructions here: postgres After installation please verify that postgres is exposing port if you are running remotely. If you are running locally then you can just add postgres host and port to application properties. Otherwise add ip address and port of postgres:</p>

<pre><code>DATASOURCE_URL=jdbc:postgresql://host:5432/nosydb
DATASOURCE_USERNAME=&quot;username you created without quotes&quot;
DATASOURCE_PASSWORD=&quot;password without quotes&quot;
</code></pre>

<h3 id="step-four"><strong>Step Four</strong></h3>

<h4 id="nosy-email-configuration"><strong>NoSy Email Configuration</strong></h4>

<p>Here we will configure only two things. Firstly, it is the kafka host port and NOSY_ADMIN_EMAIL_TOPIC which will be the same as the one previously mentioned in nosy-admin. Please refer to step 3</p>

<pre><code>KAFKA_BROKER_URL=host:port`
NOSY_ADMIN_EMAIL_TOPIC=&quot;topic for reading emails without quotes&quot;
KAFKA_CONSUMER_GROUP=&quot;consumer group without quotes&quot;
</code></pre>

<p>The second thing is username and password for default email you mentioned in nosy-admin. Please refer to Step 1. This is done because we don&rsquo;t want to transmit your private email password through the network</p>

<pre><code>NOSY_FROM_ADDRESS=&quot;default email without quotes&quot;
NOSY_FROM_ADDRESS_PASSWORD=&quot;default email password without quotes&quot;

</code></pre>

<p>The configuration part is finished. Thank you!</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified January 1, 0001
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" href="https://example.org/mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" href="https://example.org/twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" href="https://example.org/stack">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/notification-system">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="https://example.org/slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" href="https://example.org/mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2019 @Rectasolutions All Rights Reserved</small>
        
	
		<p class="mt-2"><a href="/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>





<script src="/js/main.min.fb3242fe90c6a0c954979e4e59dd2078736bdc4803262b644e4388f4bcb925ed.js" integrity="sha256-&#43;zJC/pDGoMlUl55OWd0geHNr3EgDJitkTkOI9Ly5Je0="></script>



  </body>
</html>